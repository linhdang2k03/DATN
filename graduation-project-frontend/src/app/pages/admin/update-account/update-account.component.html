<div *ngIf="userDetail" class="card m-3 rounded-4 shadow-sm">
  <div class="card-header">
    <div class="my-1 fw-bold fs-16 text-black">Update User</div>
  </div>

  <div class="card-body d-flex flex-column gap-3">
    <!-- Row: Avatar và các thông tin cơ bản -->
    <div class="row">
      <div class="col d-flex justify-content-center align-items-center">
        <div class="avatar-account rounded-3 bg-dark-grey position-relative">
          <img [src]="url" alt="User Avatar">
          <div class="bg-black-transparent position-absolute bottom-0 start-0 end-0">
            <div class="p-2 bi bi-upload text-center fs-16" style="color: white;"> Upload</div>
            <input class="input-avatar position-absolute bottom-0 start-0 end-0 z-1" type="file" accept="image/*" (change)="onFileChanged($event)">
          </div>
        </div>
      </div>

      <div class="col d-flex flex-column justify-content-between">
        <div class="row">
          <label class="form-label fw-bold fs-16 text-black">ID Card</label>
          <div class="input-group">
            <input type="text" class="form-control rounded-4 fs-14" [(ngModel)]="userDetail.idCard" disabled>
          </div>
        </div>
        <div class="row">
          <label class="form-label fw-bold fs-16 text-black">Name</label>
          <div class="input-group">
            <input type="text" class="form-control rounded-4 fs-14" [(ngModel)]="userDetail.userName">
          </div>
        </div>
      </div>

      <div class="col d-flex flex-column justify-content-between">
        <div class="row">
          <label class="form-label fw-bold fs-16 text-black">Password</label>
          <div class="input-group">
              <input type="password" class="form-control rounded-4 fs-14" [(ngModel)]="userDetail.password" autocomplete="new-password" placeholder="Enter new password (leave blank to keep current)">
          </div>
      </div>
      
        <div class="row">
          <label class="form-label fw-bold fs-16 text-black">Address</label>
          <div class="input-group">
            <input type="text" class="form-control rounded-4 fs-14" [(ngModel)]="userDetail.address">
          </div>
        </div>
      </div>
    </div>

    <!-- Row: Birth Date, Gender, Phone, Email -->
    <div class="row">
      <div class="col-2">
        <label class="form-label fw-bold fs-16 text-black">Birth Date</label>
        <div class="input-group">
          <!-- Hiển thị ngày sinh từ backend -->
          <input type="date" class="form-control rounded-4 fs-14" [(ngModel)]="userDetail.birthDate">
        </div>
      </div>
      <div class="col-2">
        <label class="form-label fw-bold fs-16 text-black">Gender</label>
        <select class="form-select rounded-4 fs-14" [(ngModel)]="userDetail.gender">
          <option value="MALE">Male</option>
          <option value="FEMALE">Female</option>
        </select>
      </div>
      <div class="col-4">
        <label class="form-label fw-bold fs-16 text-black">Phone</label>
        <div class="input-group">
          <input type="text" class="form-control rounded-4 fs-14" [(ngModel)]="userDetail.phoneNumber">
        </div>
      </div>
      <div class="col-4">
        <label class="form-label fw-bold fs-16 text-black">Email</label>
        <div class="input-group">
          <input type="email" class="form-control rounded-4 fs-14" [(ngModel)]="userDetail.email">
        </div>
      </div>
    </div>

    <!-- Row: Role -->
    <div class="row">
      <div class="col-4">
        <label class="form-label fw-bold fs-16 text-black">Role</label>
        <select class="form-select rounded-4 fs-14" [(ngModel)]="userDetail.role">
          <option value="VIEWER">VIEWER</option>
          <option value="EDITOR">EDITOR</option>
        </select>
      </div>
    </div>

    <!-- Save Button -->
    <div class="d-flex justify-content-end align-items-center gap-3">
      <button class="btn btn-primary px-3" (click)="updateUserDetail()">Save Changes</button>
      <button class="btn btn-secondary px-3" (click)="cancelUpdate()">Cancel</button>
    </div>
  </div>
</div>
